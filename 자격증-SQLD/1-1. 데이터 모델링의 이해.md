# 데이터 모델링
## 정의
- 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
- 현실 세계의 데이터(what)에 대해 약속된 표기법에 의해 표현하는 과정
- 데이터베이스를 구축하기 위한 분석/설계의 과정
- 고객이 이해하기 쉽게 간결하게 모델링해야 한다.
- 우리가 흔히 쓰는 배민, 쿠팡들 안에서 매장을 찾고, 메뉴를 선정하고 결제를 하고, 포인트, 쿠폰 등의 혜택도 있고, 배달앱과 연결해서 배달 기사들이 볼 수 있는 시스템들을 만들어야 한다. 이 시스템을 만들기 위해서는 고객의 업무 프로세스를 잘 이해해야 모델링을 잘 할 수 있다.

## 특징
1. 추상화 : 현실 세계를 일정한 표기법에 맞게 간략하게 표현한다.
2. 단순화 : 누구나 이해하기 쉽도록 약속된 규약에 의해 제한된 표기법을 이용하여 표현한다.
3. 명확화 : 명확하게 한가지 의미로만 해석되게 표현한다.

## 단계
- 개념적 모델링 : 추상적으로 두루뭉술하게 그림. 핵심 엔터티 도출.(고객이 핵심? 식당이 핵심? 결정할 것). ERD 작성
- 논리적 모델링 : 어떤 데이터베이스 모델로 만들건지, 어떤 속성들을 추가할 것인지 결정. 이메일, 전화번호 등. 데이터 정규화 완료/ 재사용성이 높음
- 물리적 모델링 : 가장 구체적인 데이터 모델링. 이 과정이 끝나면 바로 데이터베이스에 심어서 실행할 수 있게끔 해야함.

## 관점
- 데이터 관점
	- 데이터와 업무 간의 어떤 관련이 있는지
- 프로세스 관점
	- 실제 하는 업무에 따라 무엇을 어떻게 하는지 모델링 한다.
- 데이터와 프로세스의 상관 관점
	- 프로세스와 데이터 간의 서로 어떤 영향을 주고 받는지 모델링. CRUD

## ERD
### 대표적인 표기법
- UML, Chen, IE/Crow's Foot, Barker
### 작성 순서
1. 엔터티 도출 (회원 엔터티, 구매이력 엔터티)
2. 엔터티 배치
3. 엔터티 관계 설정
4. 관계명 기술
5. 관계 참여도 기술
6. 관계 필수 여부 기술

## 3단계 구조 스키마
- 외부 스키마
	- 사용자 관점
	- 배달앱 등 응용 프로그램이 접근하는 데이터 베이스
	- 여러 개의 외부 스키마 존재
- 개념 스키마
	- 데이터 베이스 관리자 관점
	- 전체적인 논리구조
	- 스키마 == 개념 스키마
	- 모든 사용자 관점을 통합한 조직 전체 관점의 통합적 표현
	- 모든 응용시스템들이나 사용자들이 필요로 하는 데이터를 통합한 조직 전체의 DB를 기술한 것으로 DB에 저장되는 데이터와 그들간의 관계를 표현한 스키마
- 내부 스키마
	- 데이터 베이스 개발자 관점
	- 저장 장치 관점의 이해 및 표현
	- 데이터 베이스에 물리적으로 어떻게 저장되는지 확인

# 엔터티
- 테이블과 비슷한 개념
- 데이터의 집합
- 개념, 사건, 장소 등의 명사

## 유형/무형에 따른 분류
- 유형 엔터티 : 사원, 제품, 교수, 회원, 매장 등등 물리적이며 지속적인 엔터티
- 개념 엔터티 : 강의, 금융상품, 부서, 메뉴, 배송 등 물리적이지 않지만 개념적으로 존재하며 정보로 구분되는 엔터티
- 사건 엔터티 : 비즈니스 프로세스에 따라 발생되는 엔터티. 데이터가 많다. 구매 내역, 판매내역, 영업 내역 등등

## 발생 시점에 따른 분류
- 기본 엔터티 : 유형 엔터티와 비슷
- 중심 엔터티 : 개념 엔터티와 비슷.
- 행위 엔터티 : 사건 엔터티와 비슷

# 속성
- 엔터티가 가지는 항목
- 주소, 전화번호, ID, 배달가능 지역 등
- 속성은 더 이상 분리되지 않는다.
- 속성은 하나의 값만 가진다. (전화번호 속성 안에 여러 개의 전화번호가 들어있으면 안된다.)
- 주식별자에게 함수적으로 종속된다.
	- = 매장이라는 엔터티에 주식별자는 매장 ID일 때, 속성인 매장명과 전화번호 등은 매장 ID를 기준으로 데이터가 연결된다.

## 종류
- 기본 속성 : 물리적인 속성. 이름, id, 전화번호, 등록일시 등
- 설계 속성 : 데이터 모델링 과정에서 발생되는 속성. 상품 코드, 지점 코드 등. 후라이드치킨, 양념치킨 등 메뉴명이 바로 DB에 들어가지 않는다. 상품코드가 데이터 베이스에 저장된다.
- 파생 속성 : 다른 속성에 의해 만들어지는 속성. 합계, 평균 등

# 관계
- 사원, 부서 등 엔터티 간의 연관성을 의미한다.
## 분류
- 존재에 의한 관계 : 부서-사원
- 행위에 의한 관계 : 고객-주문 내역
## 표기법
- 관계명 : 관계의 이름. 능동적이거나 수동적으로 명명된다.
- 관계차수 : 1:1, 1:M, M:M. 관계있는 엔터티 간에 참여하는 수를 의미한다.
- 관계선택사양 : 필수관계, 선택관계. fill circle <-> empty circle

# 식별자 (중요)
- 엔터티를 대표하는 속성
- 하나의 엔터티는 반드시 하나의 유일한 식별자를 가지고 있어야 한다. (여러개의 식별자를 하나로 구성할 수도 있다.= 복합 식별자)
- 엔터티 내 각 인스턴스를 유일하게 구분할 수 있는 구분자 (사번, 학번 등)
- 다른 엔터티와의 관계를 연결하는 식별자
- 유일성, 최소성, 불변성, 존재성을 만족해야 함

## 특징
- 최소성 : 유일성을 만족하는 최소의 수가 되어야 함
- 존재성 : 반드시 값이 존재해야 함.
- 유일성 : 주식별자에 의해 엔터티 내에 모든 인스턴스들을 유일하게 구분해야 함.
- 불변성 : 주식별자가 바뀌면 안됨. 전화번호 같은거는 쓰면 안 됨.

## 키의 종류
- 기본키(Primary Key) : 후보키 중에서 엔터티를 대표할 수 있는 키
	-  학번이 기본키가 되어야하는 이유 : 길이가 일정하고, 변하지 않음
- 후보키(Candidate Key) : 유일성과 최소성을 만족하는 키
- 슈퍼키(Super Key) : 유일성은 만족하지만 최소성을 만족하지 않는 키
- 대체키(Alternate Key) : 여러 개의 후보키 중에서 기본키를 선덩하고 남은 키. 학번, 전화번호, 주소. 이름은 안 됨(동명이인이 있을 수 있으므로 유일하지 않음)
- 외래키(Foreign Key) : 타 테이블의 기본키 필드를 가르키는 것.

## 분류
- 내부 식별자 : 학번 등 엔터티 내부에서 스스로 생성되는 식별자
- 외부 식별자 : 다른 엔터티와 관계로 인하여 만들어지는 식별자. 회원 엔터티 식별자 ID와 상품엔터티 식별자 PID가 구매내역 엔터티에서 ID + PID를 합쳐서 식별자로 사용한다면 이것은 외부 식별자이다.
- 단일 식별자 : 하나의 속성으로 구성 (ID, PID)
- 복합 식별자 : 다수의 속성으로 구성 (ID + PID)
- 본질 식별자 : 비즈니스 프로세스에 의해서 만들어지는 식별자
- 인조 식별자 : 인위적으로 만들어지는 식별자. 코드 같은거

## 주식별자 도출 방법
- 해당 업무 및 데이터에서 주로 사용되는 속성을 주식별자로 지정한다.
- 이름이나 명명된 호칭, 길이가 일정하지 않은 내용 등은 주식별자로 지정하지 않는다.
- 복합키를 구성할 때 너무 많은 속성이 포함되지 않도록 주의한다.

## 식별자 관계와 비식별자 관계
- 강한 관계 : 부모 엔터티의 주식별자가 자식 엔터티의 주식별자로 상속되는 경우
- 약한 관계 : 부모 엔터티의 주식별자가 자식 엔터티의 일반 속성으로 상속되는 경우

